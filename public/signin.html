<!DOCTYPE html>
<html class="no-js">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Charity | SignIn</title>
    <meta name="author" content="Abhisneha" />
    <link rel="icon" type="image/png" href="../images/icon.png" />

    <!-- Old Stylesheets and Scripts Starts -->
    <link rel="stylesheet" href="../css/animate.css" />
    <link rel="stylesheet" href="../css/icomoon.css" />
    <link rel="stylesheet" href="../css/bootstrap.css" />
    <link rel="stylesheet" href="../css/superfish.css" />
    <link rel="stylesheet" href="../css/style.css" />
    <script src="../js/modernizr-2.6.2.min.js"></script>
    <script
      src="https://kit.fontawesome.com/340cef720c.js"
      crossorigin="anonymous"
    ></script>
    <!-- Old Stylesheet and Scripts ends  -->

    <!-- new style and scripts -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/0.0.0-5a9c68d/tailwind.min.css"
      integrity="sha512-XgPcoW5S5ESFTO59Iy12VrhVngtzvQiLUKgp4JG3h1NVLPbdcNBNKELTswD/zDt4MEo98e7f16D/S07Arix11g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- new style and scripts ends -->

    <style>
      #new_user_container {
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- Firebase SDK starts  -->
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-performance.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth__en.js"></script>
    <link
      type="text/css"
      rel="stylesheet"
      href="https://www.gstatic.com/firebasejs/ui/4.8.0/firebase-ui-auth.css"
    />
    <script src="../js/firebase.js"></script>
    <!-- Firebase SDK ends  -->

    <div id="fh5co-wrapper">
      <div id="fh5co-page">
        <header id="fh5co-header-section" class="sticky-banner">
          <div class="container">
            <div class="nav-header">
              <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle dark"
                ><i></i
              ></a>
              <h1 id="fh5co-logo"><a href="index.html">Charity</a></h1>
              <nav id="fh5co-menu-wrap" role="navigation">
                <ul class="sf-menu" id="fh5co-primary-menu">
                  <li>
                    <a id="signIn" href="./signin.html">Sign In</a>
                  </li>
                  <!-- <li>
                    <a
                      ><span
                        id="logout"
                        style="cursor: pointer"
                        onclick="logout()"
                      >
                        Logout</span
                      ></a
                    >
                  </li>
                  <li><a href="./profile.html" id="profile">Profile</a></li> -->
                  <li><a href="./index.html">Home</a></li>
                  <li><a href="./contact.html">Contact</a></li>
                  <li><a href="./statistics.html">Statistics</a></li>
                  <li>
                    <a href="./donations.html">Donations</a>
                  </li>
                  <li><a href="./map.html">Map</a></li>
                  <li><a href="./blogs.html">Blogs</a></li>
                  <li class="active">
                    <a href="./donate.html">Donate</a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </header>

        <div class="fh5co-hero">
          <div class="fh5co-overlay"></div>
          <div
            class="fh5co-cover text-center flex h-screen"
            data-stellar-background-ratio="0.5"
            style="
              background-image: url(https://picsum.photos/1280/720?random=1);
            "
          >
            <div
              class="animate-box m-auto"
              id="login_container"
              style="z-index: 9999"
            >
              <h1 class="text-white text-7xl">SignIn to Donate</h1>
              <br />
              <div id="firebaseui-auth-container"></div>
              <div id="loader">Loading...</div>
            </div>

            <div
              class="animate-box m-auto text-left"
              id="new_user_container"
              style="z-index: 9999; width: 50%"
            >
              <form
                class="bg-white p-6 rounded"
                name="new_user_form_name"
                id="new_user_form_id"
                onsubmit="new_user_form_name_fun(event)"
              >
                <div class="flex flex-wrap -mx-3 mb-6">
                  <div class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
                    <label
                      class="
                        block
                        uppercase
                        tracking-wide
                        text-gray-700 text-xl
                        font-bold
                        mb-2
                      "
                      for="grid-name"
                    >
                      Name
                    </label>
                    <input
                      class="
                        appearance-none
                        block
                        w-full
                        bg-gray-200
                        text-gray-700
                        rounded
                        py-3
                        px-4
                        mb-3
                        leading-tight
                        focus:outline-none focus:bg-white
                      "
                      id="grid-name"
                      type="text"
                      placeholder="Your Good Name"
                      name="name"
                      required
                    />
                    <!-- <p class="text-red-500 text-xl italic">
                      Please fill out this field.
                    </p> -->
                  </div>
                  <div class="w-full md:w-1/2 px-3">
                    <label
                      class="
                        block
                        uppercase
                        tracking-wide
                        text-gray-700 text-xl
                        font-bold
                        mb-2
                      "
                      for="grid-email"
                    >
                      Email
                    </label>
                    <input
                      class="
                        appearance-none
                        block
                        w-full
                        bg-gray-200
                        text-gray-700
                        border border-gray-200
                        rounded
                        py-3
                        px-4
                        leading-tight
                        focus:outline-none focus:bg-white focus:border-gray-500
                      "
                      id="grid-email"
                      type="email"
                      placeholder="example@email.com"
                      name="email"
                      required
                    />
                  </div>
                </div>
                <div class="flex flex-wrap -mx-3 mb-6">
                  <div class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
                    <label
                      class="
                        block
                        uppercase
                        tracking-wide
                        text-gray-700 text-xl
                        font-bold
                        mb-2
                      "
                      for="grid-mobile"
                    >
                      Mobile
                    </label>
                    <input
                      class="
                        appearance-none
                        block
                        w-full
                        bg-gray-200
                        text-gray-700
                        rounded
                        py-3
                        px-4
                        mb-3
                        leading-tight
                        focus:outline-none focus:bg-white
                      "
                      id="grid-name"
                      type="text"
                      placeholder="Mobile"
                      name="mobile"
                      required
                    />
                  </div>
                  <div class="w-full md:w-1/2 px-3">
                    <label
                      class="
                        block
                        uppercase
                        tracking-wide
                        text-gray-700 text-xl
                        font-bold
                        mb-2
                      "
                      for="grid-userIs"
                    >
                      Want to be
                    </label>
                    <div class="relative">
                      <select
                        class="
                          block
                          appearance-none
                          w-full
                          bg-gray-200
                          border border-gray-200
                          text-gray-700
                          py-3
                          px-4
                          pr-8
                          rounded
                          leading-tight
                          focus:outline-none
                          focus:bg-white
                          focus:border-gray-500
                        "
                        id="grid-userIs"
                        name="userIs"
                        required
                      >
                        <option>Donor</option>
                        <option>Volunteer</option>
                      </select>
                      <div
                        class="
                          pointer-events-none
                          absolute
                          inset-y-0
                          right-0
                          flex
                          items-center
                          px-2
                          text-gray-700
                        "
                      >
                        <svg
                          class="fill-current h-4 w-4"
                          xmlns="http://www.w3.org/2000/svg"
                          viewBox="0 0 20 20"
                        >
                          <path
                            d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"
                          />
                        </svg>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="flex flex-wrap -mx-3 mb-2">
                  <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
                    <label
                      class="
                        block
                        uppercase
                        tracking-wide
                        text-gray-700 text-xl
                        font-bold
                        mb-2
                      "
                      for="grid-city"
                    >
                      City
                    </label>
                    <input
                      class="
                        appearance-none
                        block
                        w-full
                        bg-gray-200
                        text-gray-700
                        border border-gray-200
                        rounded
                        py-3
                        px-4
                        leading-tight
                        focus:outline-none focus:bg-white focus:border-gray-500
                      "
                      id="grid-city"
                      type="text"
                      placeholder="Kolkata"
                      name="city"
                      required
                    />
                  </div>
                  <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
                    <label
                      class="
                        block
                        uppercase
                        tracking-wide
                        text-gray-700 text-xl
                        font-bold
                        mb-2
                      "
                      for="grid-state"
                    >
                      State
                    </label>
                    <input
                      class="
                        appearance-none
                        block
                        w-full
                        bg-gray-200
                        text-gray-700
                        border border-gray-200
                        rounded
                        py-3
                        px-4
                        leading-tight
                        focus:outline-none focus:bg-white focus:border-gray-500
                      "
                      id="grid-state"
                      type="text"
                      placeholder="West Bengal"
                      name="state"
                      required
                    />
                  </div>
                  <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
                    <label
                      class="
                        block
                        uppercase
                        tracking-wide
                        text-gray-700 text-xl
                        font-bold
                        mb-2
                      "
                      for="grid-zip"
                    >
                      Zip
                    </label>
                    <input
                      class="
                        appearance-none
                        block
                        w-full
                        bg-gray-200
                        text-gray-700
                        border border-gray-200
                        rounded
                        py-3
                        px-4
                        leading-tight
                        focus:outline-none focus:bg-white focus:border-gray-500
                      "
                      id="grid-zip"
                      type="text"
                      placeholder="700001"
                      name="zip"
                    />
                  </div>
                </div>
                <div class="flex items-center justify-between">
                  <button
                    class="
                      bg-blue-500
                      hover:bg-blue-700
                      text-white
                      font-bold
                      py-2
                      px-4
                      rounded
                      focus:outline-none focus:shadow-outline
                    "
                    type="submit"
                  >
                    Submit
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <footer>
          <div id="footer">
            <div class="container">
              <div class="row">
                <div class="col-md-6 col-md-offset-3 text-center">
                  <p class="fh5co-social-icons">
                    <a href="https://twitter.com/TarunKamboj_" target="_blank"
                      ><i class="fab fa-twitter"></i
                    ></a>
                    <a
                      href="https://linkedin.com/in/kambojtarun"
                      target="_blank"
                      ><i class="fab fa-linkedin-in"></i
                    ></a>
                    <a href="mailto:kambojtarun02@gmail.com" target="_blank"
                      ><i class="fas fa-envelope"></i
                    ></a>
                    <a href="https://Tarun-Kamboj.github.io" target="_blank"
                      ><i class="fas fa-link"></i
                    ></a>
                    <a href="https://github.com/Tarun-Kamboj" target="_blank"
                      ><i class="fab fa-github"></i
                    ></a>
                  </p>
                  <p>
                    Copyright 2021. All Rights Reserved. <br /><i
                      class="fas fa-code"
                    ></i>
                    with <i class="fas fa-heart"></i>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </div>

    <!--External Scripts Starts -->
    <script src="../js/jquery.min.js"></script>
    <script src="../js/jquery.easing.1.3.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/jquery.waypoints.min.js"></script>
    <script src="../js/sticky.js"></script>
    <script src="../js/jquery.stellar.min.js"></script>
    <script src="../js/hoverIntent.js"></script>
    <script src="../js/superfish.js"></script>
    <script src="../js/main.js"></script>
    <!--External Scripts Ends -->

    <script>
      // <!-- Firebase user signIn scripts starts  -->
      // FirebaseUI config.
      var uiConfig = {
        callbacks: {
          signInSuccessWithAuthResult: function (authResult, redirectUrl) {
            console.log(authResult);
            if (authResult.additionalUserInfo.isNewUser) {
              newUserDetails(authResult.user);
            } else {
              window.location.replace("./donate.html");
            }
            // Return type determines whether we continue the redirect automatically
            // or whether we leave that to developer to handle.
            return false;
          },
          uiShown: function () {
            // The widget is rendered.
            // Hide the loader.
            document.getElementById("loader").style.display = "none";
          },
        },
        signInFlow: "popup",
        signInSuccessUrl: "./index.html",
        signInOptions: [
          // Leave the lines as is for the providers you want to offer your users.
          firebase.auth.GoogleAuthProvider.PROVIDER_ID,
          firebase.auth.EmailAuthProvider.PROVIDER_ID,

          {
            provider: firebase.auth.PhoneAuthProvider.PROVIDER_ID,
            defaultCountry: "IN",
          },
        ],
        // tosUrl and privacyPolicyUrl accept either url string or a callback
        // function.
        // Terms of service url/callback.
        tosUrl: "./terms.html",
        // Privacy policy url/callback.
        privacyPolicyUrl: function () {
          window.location.assign("./privacy.html");
        },
      };

      // Initialize the FirebaseUI Widget using Firebase.
      var ui = new firebaseui.auth.AuthUI(firebase.auth());
      // The start method will wait until the DOM is loaded.
      ui.start("#firebaseui-auth-container", uiConfig);
      // <!-- Firebase user signIn scripts ends  -->

      function newUserDetails(user) {
        document.getElementById("login_container").style.display = "none";
        document.getElementById("new_user_container").style.display = "block";
        const get_user_form = document.forms["new_user_form_name"];
        if (user.displayName) get_user_form.name.value = user.displayName;
        if (user.email) {
          get_user_form.email.value = user.email;
          get_user_form.email.readOnly = true;
        }
        if (user.phoneNumber) {
          get_user_form.mobile.value = user.phoneNumber;
          get_user_form.mobile.readOnly = true;
        }
      }

      function new_user_form_name_fun(event) {
        event.preventDefault();
        const get_user_form = document.forms["new_user_form_name"];
        const currentTime = new Date().toLocaleString("en-US", {
          timeZone: "Asia/Kolkata",
        });
        const currentDate = new Date().toLocaleDateString();

        firebase.auth().onAuthStateChanged(function (user) {
          firebase
            .database()
            .ref(`users/${get_user_form.userIs.value}`)
            .child(user.uid)
            .set({
              current_time: currentTime,
              current_date: currentDate,
              user_name: get_user_form.name.value,
              user_email: get_user_form.email.value,
              user_mobile: get_user_form.mobile.value,
            })
            .then(function () {
              alert("Thanks for becoming a member..!!");
              document.getElementById("new_user_container").style.display =
                "none";
              window.location.replace("./donate.html");
            });
        });
      }
    </script>

    <!-- new scripts starts -->
    <script src="./script.js"></script>
    <!-- new scripts ends  -->
  </body>
</html>
